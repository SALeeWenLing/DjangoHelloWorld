{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Cards</title>
    <link rel="stylesheet" href="{% static 'css/task_cards.css' %}"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> <!-- Include Font Awesome for X delet button -->
</head>
<body>

<!-- task_cards.html -->
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Cards</title>
    <link rel="stylesheet" href="{% static 'css/task_cards.css' %}">
</head>
<body>

<!-- task_cards_3by3.html -->
<div class="col-md-4">
    <h3 class="task-status-header">All {{ status }} Tasks</h3>
</div>
<div class="wide-cards-container">
    {% comment %} <ul class="list-group"> {% endcomment %}
        {% for task in tasks %}
            {% if task.status == status %}
                <li class="list-group-item task-link task-card" data-id="{{ task.id }}" ondblclick="updateTask({{ task.id }})">
                    <div class="task-content">
                        <h4>{{ task.task_name }}</h4>
                        <table class="task-table">
                            
                            <tr>
                                <td class="label-cell">Story Point:</td>
                                <td>{{ task.story_point }}</td>
                            </tr>

                            <tr>
                                <td class="label-cell">Priority:</td>
                                <td id="priority-view-{{ task.id }}" class="priority">
                                    {{ task.get_priority_display }}
                                </td>
                                <td>
                                    <select id="priority-edit-{{ task.id }}" data-field="priority" data-id="{{ task.id }}" class="editable-field" style="display: none;">
                                        <option value="low" {% if task.priority == 'low' %}selected{% endif %}>Low</option>
                                        <option value="medium" {% if task.priority == 'medium' %}selected{% endif %}>Medium</option>
                                        <option value="important" {% if task.priority == 'important' %}selected{% endif %}>Important</option>
                                        <option value="urgent" {% if task.priority == 'urgent' %}selected{% endif %}>Urgent</option>
                                    </select>
                                </td>
                            </tr>

                            <tr>
                                <td class="label-cell">Development Tag:</td>
                                <td class="details-cell">
                                    {% for tag in task.development_tag.all %}
                                        {{ tag.name }}{% if not forloop.last %}, {% endif %}
                                    {% empty %}
                                        None
                                    {% endfor %}
                                </td>
                            </tr>

                            <tr>                                
                                <p>
                                    Date of creation: 
                                    {% if task.created_at %}
                                        {{ task.created_at }}
                                    {% else %}
                                        Not available
                                    {% endif %}
                                </p>
                            </tr>
                                <td>(TO TEST) Sprint:</td>
                                <td colspan="2">{{ task.sprint }}</td>
                            <tr>


                        </table>
                    </div>
                    {% if user.is_superuser or user.is_staff %}
                        <div class="task-buttons">
                            <button onclick="deleteTask({{ task.id }})" class="btn btn-delete" style="position: absolute; top: 0; right: 0;">
                                <i class="fas fa-times"></i> <!-- Font Awesome X icon -->
                        </div>
                    {% endif %}
                </li>
            {% endif %}
        {% endfor %}
    {% comment %} </ul> {% endcomment %}
</div>

<!-- JavaScript file -->
<script src="{% static 'js/task_management.js' %}"></script>

</body>
</html>